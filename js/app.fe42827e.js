(function(e){function t(t){for(var n,i,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0c19":function(e,t,s){},"0f32":function(e,t,s){},1:function(e,t){},1543:function(e,t,s){},2:function(e,t){},"2a84":function(e,t,s){"use strict";var n=s("ef47"),a=s.n(n);a.a},"4f8e":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("v-app",[s("v-content",[s("v-stepper",{attrs:{"non-linear":""},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}},[s("v-stepper-header",[e._l(e.pages,(function(t,n){return s("v-stepper-step",{key:n,attrs:{step:n+1,complete:e.current_page===n+1,color:"primary",editable:""}},[s("span",[e._v(" "+e._s(t.name)+" "),"network"===t.key&&e.requests>0?s("small",{staticClass:"relative",staticStyle:{bottom:"1px"}},[e._v(" ("+e._s(e.requests)+") ")]):e._e()])])})),s("v-spacer"),s("label",{staticStyle:{cursor:"pointer",display:"flex"}},[s("v-flex",{attrs:{"align-self-center":"","px-3":""}},[s("v-icon",[e._v(e._s(e.icon_dark_mode))]),s("v-switch",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.dark_mode,callback:function(t){e.dark_mode=t},expression:"dark_mode"}})],1)],1)],2),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:1}},[s("Database")],1),s("v-stepper-content",{attrs:{step:2}},[s("Network",{attrs:{active:2===e.current_page},on:{requests:e.setRequestsCount}})],1),e._l(e.plugins,(function(t,n){return s("v-stepper-content",{key:t.key,attrs:{step:n+3}},[s("Plugin",{attrs:{active:e.current_page===n+3,plugin:t}})],1)}))],2)],1)],1),s("v-footer",{attrs:{app:""}},[s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{staticClass:"ip-field",attrs:{height:"25",outlined:"","hide-details":""},model:{value:e.baseURL,callback:function(t){e.baseURL=t},expression:"baseURL"}})],1),s("v-spacer"),s("span",{staticClass:"version"},[e._v(" v"+e._s(e.version)+" ")])],1)],1)],1)},r=[],i=(s("99af"),s("d3b7"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("splitpanes",{staticClass:"default-theme fill-height"},[s("pane",{staticStyle:{"min-width":"250px"},attrs:{size:"15","max-size":"40"}},[s("TreeView",{attrs:{databases:e.databases,currentdb:e.currentdb,schema:e.schema,progress:e.progress},on:{selectDB:e.selectDB,query:e.queryTable}})],1),s("pane",{attrs:{size:"85"}},[s("splitpanes",{attrs:{horizontal:""},on:{resize:e.resize}},[s("pane",[s("SqlConsole",{ref:"console",attrs:{schema:e.schema},on:{query:e.query}}),s("v-overlay",{attrs:{absolute:"",value:!e.schema.tables}})],1),e.loading||e.error||e.result?s("pane",[e.error?s("div",{staticClass:"error--text ma-2"},[e._v(e._s(e.error))]):e._e(),s("TableView",{directives:[{name:"show",rawName:"v-show",value:e.loading||!e.error&&e.result,expression:"loading || (!error && result)"}],attrs:{sql:e.last_query,result:e.result,loading:e.loading},on:{reload:e.query}}),!e.error&&e.result?s("div",{staticClass:"result-info"},[e._v(e._s(e.info))]):e._e()],1):e._e()],1)],1)],1)}),o=[],l=(s("4de4"),s("7db0"),s("c975"),s("d81d"),s("fb6a"),s("4fad"),s("498a"),s("3835")),c=s("b85c"),u=(s("96cf"),s("1da1")),d=s("2ef0"),p=s("512e"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"console-wrapper"},[s("div",{staticClass:"d-flex align-center"},[s("v-btn",{staticClass:"ml-3",attrs:{icon:"","x-small":"",color:"neutral"},on:{click:function(t){e.history_popup=!0}}},[s("v-icon",[e._v("mdi-history")])],1),s("v-btn",{staticClass:"ml-2",attrs:{icon:"",small:"",color:"success"},on:{click:e.executeQuery}},[s("v-icon",[e._v("mdi-play")])],1),s("v-spacer"),s("v-checkbox",{staticClass:"my-0 py-0 mr-2",attrs:{label:"Script",dense:"","hide-details":""},model:{value:e.script,callback:function(t){e.script=t},expression:"script"}})],1),s("Editor",{ref:"console",attrs:{lang:"mysql",theme:e.theme,options:e.editorOptions},model:{value:e.sql,callback:function(t){e.sql=t},expression:"sql"}}),s("SqlHistory",{on:{selected:e.historySelected},model:{value:e.history_popup,callback:function(t){e.history_popup=t},expression:"history_popup"}})],1)},h=[],v=(s("4160"),s("caad"),s("13d5"),s("b64b"),s("07ac"),s("4d63"),s("ac1f"),s("25f0"),s("8a79"),s("2532"),s("1276"),s("159b"),s("7c9e")),m=s.n(v),b=(s("61fa"),s("95b8"),s("79fb"),s("2099"),s("56e3"),s("6c3b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{"content-class":"sql-history-popup"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[s("v-card",{staticClass:"sql-history-container",attrs:{height:"100%"}},[s("v-card-title",{staticClass:"panel pa-1"},[s("v-layout",{staticClass:"text-center"},[s("v-flex",[e._v("SQL History")])],1),s("v-btn",{attrs:{color:"neutral",small:"",icon:"",absolute:"",right:""},on:{click:function(t){e.open=!1}}},[s("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1)],1),s("v-card-text",{staticClass:"pa-0 flex relative"},[s("splitpanes",{staticClass:"default-theme absolute-expand"},[s("pane",{staticStyle:{"min-width":"250px"},attrs:{size:"40"}},[s("v-layout",{staticClass:"fill-height",attrs:{column:""}},[s("v-btn-toggle",{attrs:{mandatory:"",borderless:"",color:"accent"},model:{value:e.favorites,callback:function(t){e.favorites=t},expression:"favorites"}},[s("v-btn",{staticClass:"flex flex-basis-0",attrs:{value:!1,small:""}},[e._v("All")]),s("v-btn",{staticClass:"flex flex-basis-0",attrs:{value:!0,small:""}},[e._v("Favorites")])],1),s("v-list",{staticClass:"sql-history-list pt-0 overflow-y-auto",attrs:{dense:""}},[s("v-list-item-group",{attrs:{mandatory:"",color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._l(e.items,(function(t,n){return[s("v-hover",{key:n,scopedSlots:e._u([{key:"default",fn:function(a){var r=a.hover;return[s("v-list-item",{staticClass:"sql-history-item px-2",class:{selected:e.selected===n},on:{dblclick:function(s){return e.selectItem(t)}}},[s("v-list-item-content",[s("v-list-item-subtitle",[s("small",[e._v(e._s(e.formatTimestamp(t.timestamp)))]),r||t.favorite?s("v-btn",{staticClass:"favorite-btn",attrs:{"x-small":"",icon:""},on:{mousedown:function(e){e.stopPropagation()},click:function(s){return s.stopPropagation(),e.toggleFavorite(t)}}},[t.favorite?s("v-icon",{attrs:{color:"accent","x-small":""}},[e._v(" mdi-star ")]):s("v-icon",{attrs:{"x-small":""}},[e._v(" mdi-star-outline ")])],1):e._e()],1),s("v-list-item-title",[e._v(e._s(t.sql))])],1)],1)]}}],null,!0)}),s("v-divider",{key:"divider"+n})]}))],2)],1)],1)],1),s("pane",[s("div",{staticClass:"fill-height overflow-y-auto px-3 pb-5"},[e.selected>=0?s("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.items[e.selected].sql,expression:"items[selected].sql"}],class:e.codestyle},[s("code",{staticClass:"sql"})]):e._e()])])],1)],1)],1)],1)}),g=[];s("a15b"),s("b680");function y(e){return new Promise((function(t){return setTimeout(t,e)}))}function _(e,t){var s=new Date,n=new Date(e);return t||s.toDateString()!==n.toDateString()?n.toLocaleString():n.toLocaleTimeString()}function x(e){var t=e.sec,s=e.usec,n=[];return t&&n.push("".concat(t," second")+(t>1?"s":"")),s&&n.push("".concat((s/1e3).toFixed(2)," milliseconds")),n.join(" and ")}var k={name:"SqlHistory",components:{Splitpanes:p["Splitpanes"],Pane:p["Pane"]},props:{value:Boolean},data:function(){return{favorites:!1,selected:-1,prev_item:void 0,history:[]}},computed:{open:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},codestyle:function(){return this.dark_mode?"dark":"light"},items:function(){var e=this;return this.history.filter((function(t){return!e.favorites||t.favorite}))}},watch:{open:{handler:"initialize",immediate:!0},selected:function(e){this.prev_item=e>=0?this.items[e]:void 0},items:function(){var e=this.items.length,t=this.prev_item?this.items.map((function(e){return e.sql})).indexOf(this.prev_item.sql):-1;t>=0?this.selected=t:(this.favorites||this.selected<0)&&e?this.selected=0:this.selected>=e&&(this.selected=e-1),this.prev_item=this.selected>=0?this.items[this.selected]:void 0}},mounted:function(){this.keyboard=this.keyboard.bind(this),document.addEventListener("keydown",this.keyboard)},beforeDestroy:function(){document.removeEventListener("keydown",this.keyboard)},methods:{initialize:function(){var e=this;this.history=JSON.parse(localStorage.getItem("sql_history")||"[]"),this.open&&this.selected>=0&&requestAnimationFrame((function(){e.$vuetify.goTo(".sql-history-item.selected",{container:".sql-history-list",duration:0})}))},toggleFavorite:function(e){this.$set(e,"favorite",!e.favorite),localStorage.setItem("sql_history",JSON.stringify(this.history))},selectItem:function(e){var t=e.sql;this.$emit("selected",t),this.open=!1},keyboard:function(e){var t=this;if(this.open){var s=9,n=13,a=27,r=32,i=38,o=40,l=e.keyCode;switch(l){case a:this.open=!1;break;case s:e.preventDefault(),this.favorites=!this.favorites;break;case r:if(this.selected>=0){e.preventDefault();var c=this.items[this.selected];this.toggleFavorite(c)}break;case n:if(e.preventDefault(),this.selected>=0){var u=this.items[this.selected];this.selectItem(u)}break;case i:case o:e.preventDefault();var d=this.items.length;d>0&&this.selected>=0&&(l===i?this.selected>0&&this.selected--:this.selected<d-1&&this.selected++,requestAnimationFrame((function(){var e=document.querySelector(".sql-history-list").clientHeight,s=document.querySelector(".sql-history-item.selected").clientHeight,n=(e-s)/2;t.$vuetify.goTo(".sql-history-item.selected",{container:".sql-history-list",duration:200,offset:n})})));break}}},formatTimestamp:_}},w=k,q=(s("c748"),s("a39e"),s("2877")),C=s("6544"),S=s.n(C),j=s("8336"),O=s("a609"),V=s("b0af"),R=s("99d9"),T=s("169a"),F=s("ce7e"),$=s("0e8f"),D=s("ce87"),L=s("132d"),I=s("a722"),B=s("8860"),E=s("da13"),P=s("5d23"),N=s("1baa"),z=Object(q["a"])(w,b,g,!1,null,"c3e6229e",null),A=z.exports;S()(z,{VBtn:j["a"],VBtnToggle:O["a"],VCard:V["a"],VCardText:R["a"],VCardTitle:R["b"],VDialog:T["a"],VDivider:F["a"],VFlex:$["a"],VHover:D["a"],VIcon:L["a"],VLayout:I["a"],VList:B["a"],VListItem:E["a"],VListItemContent:P["a"],VListItemGroup:N["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"]});var H={name:"SqlConsole",components:{Editor:m.a,SqlHistory:A},props:{value:String,schema:Object},data:function(){return{sql:"",script:!1,history_popup:!1}},computed:{theme:function(){return this.dark_mode?"twilight":"chrome"},editor:function(){return this.$refs.console.editor},editorOptions:function(){return{enableBasicAutocompletion:[U],enableLiveAutocompletion:[U]}}},watch:{schema:function(e){Object.assign(M,e)},sql:function(e){localStorage.setItem("sql",e)},script:function(e){localStorage.setItem("script",e)}},mounted:function(){var e=this;this.sql=localStorage.getItem("sql")||"",this.script=JSON.parse(localStorage.getItem("script"))||!1,Object.assign(M,this.schema),this.$on("resize",(function(){e.editor.resize()}));var t=function(){e.executeQuery()},s=["Ctrl-Enter","Command-Enter"].map((function(e,s){return{name:"query"+s,bindKey:e,exec:t}}));s.forEach((function(t){return e.editor.commands.addCommand(t)}))},methods:{executeQuery:function(){this.$emit("query",this.editor.getSelectedText()||this.sql,this.script)},historySelected:function(e){this.sql=e,this.editor.focus()}}},M={},U={getCompletions:function(e,t,s,n,a){var r=[];if(M.tables){var i=t.doc.positionToIndex(s),o=e.getValue(),c=/[^a-zA-Z_0-9$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/,u=function(e){return(Array.isArray(e)?e:Object.keys(e)).filter((function(e){return e.includes(n)})).map((function(e){return{name:e,value:e}}))},d=o.substring(0,i-n.length);if(/\b(from|join|update|table)\b\W+$/i.test(d))r=u(M.tables);else if(d.endsWith(".")){var p=d.substr(0,d.length-1).split(c).pop(),f=M.tables[p];f&&(r=u(f.columns))}if(!r.length&&n.length>=2){for(var h=0,v=Object.entries(M.tables);h<v.length;h++){var m=Object(l["a"])(v[h],2),b=m[0],g=m[1];new RegExp("\\b"+b+"\\b").test(o)&&(r=r.concat(u(g.columns)))}r.length||(r=Object.values(M.tables).reduce((function(e,t){return e.concat(u(t.columns))}),[]).concat(u(M.tables)))}}a(null,r)}},J=H,W=(s("d4af"),s("ac7c")),Q=s("2fa4"),G=Object(q["a"])(J,f,h,!1,null,null,null),K=G.exports;S()(G,{VBtn:j["a"],VCheckbox:W["a"],VIcon:L["a"],VSpacer:Q["a"]});var Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"result-container"},[s("v-data-table",{ref:"dt",staticClass:"result-table fill-height",attrs:{loading:e.loading,"loading-text":"Executing query...",headers:e.headers,items:e.items,"items-per-page":10,"sort-by":e.sort,height:"100%",dense:"","fixed-header":"","footer-props":{"items-per-page-options":[10,20,30,-1]}},scopedSlots:e._u([{key:"no-data",fn:function(){return[s("div",{staticClass:"no-data"},[s("div",[e._v("No data available")])])]},proxy:!0},e.loading?null:{key:"body.prepend",fn:function(){return[s("tr",e._l(e.headers.length,(function(t){return s("td",{directives:[{name:"show",rawName:"v-show",value:e.visible[t-1],expression:"visible[i-1]"}],key:t},[s("v-text-field",{staticClass:"result-search",attrs:{"append-icon":"mdi-magnify","background-color":"controls",autocomplete:"disabled",spellcheck:"false",dense:"","hide-details":""},on:{input:function(s){return e.updateSearch(t-1)}},model:{value:e.search[t-1],callback:function(s){e.$set(e.search,t-1,s)},expression:"search[i-1]"}})],1)})),0)]},proxy:!0}],null,!0)}),s("div",{staticClass:"result-toolbar pt-1"},[e._l(e.toolbar_buttons,(function(t,n){return[s("v-tooltip",{key:n,attrs:{right:"",transition:"slide-x-transition","open-delay":"1200","content-class":"px-2 py-0"},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on;return[s("v-btn",e._g({staticClass:"mb-3",attrs:{icon:"","x-small":"",disabled:!e.headers.length},on:{click:t.action}},a),[s("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1)]}}],null,!0)},[s("span",[e._v(e._s(t.tooltip))])])]}))],2),s("ColumnsFilter",{attrs:{headers:e.headers,"columns-visible":e.visible},on:{"update:columnsVisible":function(t){e.visible=t},"update:columns-visible":function(t){e.visible=t},goto:e.gotoColumn},model:{value:e.columns_filter_popup,callback:function(t){e.columns_filter_popup=t},expression:"columns_filter_popup"}})],1)},Z=[],X=(s("cb29"),s("841c"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{width:"300","overlay-opacity":"0.1",attach:".result-container","content-class":"columns-filter-popup",scrollable:""},on:{keydown:e.keyboard},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[s("v-card",[s("v-card-title",{staticClass:"panel pa-1 px-2"},[s("v-layout",[s("v-flex",{attrs:{xs1:"","align-self-center":""}},[s("v-checkbox",{staticClass:"my-1 py-0",attrs:{dense:"","hide-details":""},model:{value:e.visible_all,callback:function(t){e.visible_all=t},expression:"visible_all"}})],1),s("v-flex",{attrs:{"align-self-center":""}},[s("v-text-field",{ref:"search",staticClass:"result-search ml-2",attrs:{"append-icon":"mdi-magnify","background-color":"controls",autocomplete:"disabled",spellcheck:"false",dense:"","hide-details":"",autofocus:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),s("v-card-text",{staticClass:"columns-filter-body px-2 py-2",staticStyle:{"max-height":"300px"}},[e._l(e.headers.keys(),(function(t){return[s("v-hover",{key:t,scopedSlots:e._u([{key:"default",fn:function(n){var a=n.hover;return[s("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.listed[t],expression:"listed[i]"}],staticClass:"columns-filter-item",class:{selected:e.selected===t}},[s("v-flex",{attrs:{xs1:"","align-self-center":""}},[s("v-checkbox",{staticClass:"my-0 py-1 mr-2",attrs:{dense:"","hide-details":""},model:{value:e.visible[t],callback:function(s){e.$set(e.visible,t,s)},expression:"visible[i]"}})],1),s("v-flex",{staticClass:"ml-2 align-stretch"},[s("v-layout",{staticClass:"pointer noselect fill-height",on:{click:function(s){return e.toggleVisible(t)}}},[s("v-flex",{attrs:{"align-self-center":""},domProps:{innerHTML:e._s(e.listed[t])}})],1)],1),s("v-flex",{staticClass:"ml-2",attrs:{xs1:"","align-self-center":""}},[e.visible[t]?s("v-btn",{attrs:{icon:"","x-small":"",color:a?"primary":"transparent"},on:{click:function(s){return e.gotoColumn(t)}}},[s("v-icon",{staticClass:"pointer"},[e._v("mdi-target")])],1):e._e()],1)],1)]}}],null,!0)})]}))],2)],1)],1)}),ee=[],te=(s("a623"),s("ade3")),se=s("2909"),ne=s("bbd6"),ae=s.n(ne),re={name:"ColumnsFilter",props:{value:Boolean,headers:Array,columnsVisible:Array},data:function(){return{search:"",selected:-1}},computed:{open:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},visible_all:{get:function(){return this.visible.every((function(e){return e}))},set:function(e){this.fillVisible(e)}},visible:function(){var e=this;return new Proxy(this.columnsVisible,{set:function(t,s,n){return isNaN(s)||e.updateVisible(Object.assign(Object(se["a"])(t),Object(te["a"])({},s,n))),!0}})},listed:function(){var e=this;return this.search?this.prepared_search_headers.map((function(t){return ae.a.single(e.search,t)})).map((function(e){return e&&e.score>-100&&ae.a.highlight(e,"<b class='primary--text'>","</b>")})):this.headers.map((function(e){return e.text}))},prepared_search_headers:function(){return this.headers.map((function(e){return ae.a.prepare(e.text)}))}},watch:{value:function(e){var t=this;e&&(this.search="",this.selected=-1,requestAnimationFrame((function(){t.$refs.search.focus()})))},search:function(){var e=this.selected;e>=0&&!this.listed[e]&&(this.selected=-1)}},created:function(){this.keyboard=Object(d["throttle"])(this.keyboard,100)},methods:{updateVisible:function(e){this.$emit("update:columns-visible",e)},fillVisible:function(e){this.updateVisible(Array(this.headers.length).fill(e))},toggleVisible:function(e){this.visible[e]=!this.visible[e],this.selected=e},gotoColumn:function(e){this.$emit("goto",e-this.visible.filter((function(t,s){return s<e&&!t})).length)},keyboard:function(e){var t=this,s=13,n=32,a=38,r=40,i=e.keyCode,o=this.selected,l=Object(d["findIndex"])(this.listed),c=Object(d["findLastIndex"])(this.listed);switch(i){case s:while(o<=c&&(!this.listed[o]||!this.visible[o]))o++;o>=0&&o<=c&&(this.gotoColumn(o),this.open=!1);break;case n:e.preventDefault(),o>=0&&this.toggleVisible(o);break;case a:case r:if(e.preventDefault(),i===a)if(o<0||!this.listed[o])o=c;else do{o--}while(o>=0&&!this.listed[o]);else if(o<0||!this.listed[o])o=l;else do{o++}while(o<=c&&!this.listed[o]);this.selected!==o&&o>=l&&o<=c&&(this.selected=o,requestAnimationFrame((function(){t.$vuetify.goTo(".columns-filter-item.selected",{container:".columns-filter-body",offset:150,duration:200})})));break}}}},ie=re,oe=(s("7105"),s("8654")),le=Object(q["a"])(ie,X,ee,!1,null,null,null),ce=le.exports;S()(le,{VBtn:j["a"],VCard:V["a"],VCardText:R["a"],VCardTitle:R["b"],VCheckbox:W["a"],VDialog:T["a"],VFlex:$["a"],VHover:D["a"],VIcon:L["a"],VLayout:I["a"],VTextField:oe["a"]});var ue={name:"TableView",components:{ColumnsFilter:ce},props:{sql:String,result:Object,loading:Boolean},data:function(){return{search:[],search_debounced:[],columns_filter_popup:!1,visible:[],sort:[],last_headers:[],scroll:0}},computed:{toolbar_buttons:function(){var e=this;return[{icon:"mdi-table-row-remove",color:"neutral",tooltip:"Filter columns",action:function(){return e.showColumnFilter()}},{icon:"mdi-sync",color:"primary",tooltip:"Reload",action:function(){return e.$emit("reload",e.sql)}}]},headers:function(){var e=this,t=function(t){return function(s){return!(e.search_debounced[t]||"").length||String(s).toLowerCase().includes(e.search_debounced[t].toLowerCase())}};return this.loading?[]:Object(d["get"])(this.result,"headers",[]).map((function(s,n){return{text:s,value:n.toString(),align:e.visible[n]?"":" d-none",filter:t(n)}}))},items:function(){var e=Object.keys(Object(d["get"])(this.result,"headers",[]));return this.loading?[]:Object(d["get"])(this.result,"data",[]).map((function(t){return Object(d["zipObject"])(e,t)}))},updateSearch:function(){var e=this;return Object(d["debounce"])((function(t){e.$set(e.search_debounced,t,e.search[t])}),Math.min(70*this.items.length/1e4,1e3))}},watch:{result:function(e){var t=this;e&&(Object(d["isEqual"])(e.headers,this.last_headers)||(this.last_headers=e.headers,this.fillVisible(!0),this.search.fill(""),this.search_debounced.fill(""),this.sort=[],this.scroll=0),requestAnimationFrame((function(){var e=t.$refs.dt.$el.querySelector(".v-data-table__wrapper");e.addEventListener("scroll",t.onScroll),e.scrollTo({left:t.scroll})})))},visible:function(e){var t=this;e.forEach((function(e,s){e||(t.search[s]="",t.search_debounced[s]="")}))}},created:function(){this.onScroll=this.onScroll.bind(this)},mounted:function(){this.fillVisible(!0)},methods:{onScroll:function(e){this.loading||(this.scroll=e.target.scrollLeft)},fillVisible:function(e){this.headers&&(this.visible=Array(this.headers.length).fill(e))},showColumnFilter:function(){this.columns_filter_popup=!0},gotoColumn:function(e){var t=this.$refs.dt.$el,s=t.querySelector("th.primary--text");s&&s.classList.remove("primary--text");var n=t.querySelectorAll("th:not(.d-none)"),a=t.querySelector(".v-data-table__wrapper"),r=a.getBoundingClientRect(),i=n[e].getBoundingClientRect(),o=n[0].getBoundingClientRect().left-r.left-12,l=i.left-r.left-(r.width-i.width)/2-o;a.scrollTo({left:l,behavior:"smooth"}),n[e].classList.add("primary--text")}}},de=ue,pe=(s("9d0b"),s("8fea")),fe=s("3a2f"),he=Object(q["a"])(de,Y,Z,!1,null,null,null),ve=he.exports;S()(he,{VBtn:j["a"],VDataTable:pe["a"],VIcon:L["a"],VTextField:oe["a"],VTooltip:fe["a"]});var me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tree-container"},[s("v-select",{staticClass:"database-picker",attrs:{"background-color":"panel",items:e.databases,"prepend-inner-icon":"mdi-database","append-icon":null,disabled:!e.items,readonly:1===e.databases.length,"hide-details":"","hide-selected":"",filled:"",solo:"",dense:"",flat:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),s("v-btn",{staticClass:"database-sync",attrs:{icon:"","x-small":"",color:"neutral"},on:{click:function(t){return e.selectDB(e.selected)}}},[s("v-icon",[e._v("mdi-sync")])],1),e.items?s("v-treeview",{staticClass:"database-tree",attrs:{open:e.open,items:e.items,activatable:""},on:{"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"label",fn:function(t){var n=t.item,a=t.leaf;return[s("v-flex",{staticClass:"noselect text-truncate",on:{dblclick:function(t){!a&&e.query(n.name)}}},[e._v(" "+e._s(n.name)+" ")])]}},{key:"append",fn:function(t){var n=t.item;return[s("span",{staticClass:"noselect accent--text text-lowercase pt-1 pl-2",staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(n.type)+" ")])]}},{key:"prepend",fn:function(t){var n=t.item,a=t.leaf;return[a?[s("v-tooltip",{attrs:{bottom:"","offset-overflow":"",color:"black"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n.pk&&n.fk?s("div",e._g({staticStyle:{position:"relative"}},a),[s("v-icon",{attrs:{color:"amber"}},[e._v(" mdi-key-variant ")]),s("v-icon",{staticStyle:{position:"absolute",left:"3px"},attrs:{color:"green"}},[e._v(" mdi-key-variant ")])],1):n.pk?s("v-icon",{attrs:{color:"amber"}},[e._v(" mdi-key-variant ")]):n.fk?s("v-icon",e._g({attrs:{color:"green"}},a),[e._v(" mdi-key-variant ")]):s("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-table-column ")])]}}],null,!0)},[s("span",[e._v(e._s(n.fk))])])]:s("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.toggle(n.name)}}},[s("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-table-large ")])],1)]}}],null,!1,1426535915)}):s("v-progress-circular",{staticClass:"ma-auto align-self-center progress",attrs:{value:e.progress,indeterminate:e.progress<0,size:"80",width:"2",color:"primary"}},[e.progress>=0?s("span",[e._v(e._s(e.progress)+"%")]):e._e()])],1)},be=[],ge=(s("a9e3"),s("5530")),ye={name:"TreeView",props:{schema:Object,progress:Number,databases:Array,currentdb:Number},data:function(){return{items:null,open:[]}},computed:{selected:{get:function(){return this.databases[this.currentdb]},set:function(e){this.selectDB(e)}}},watch:{schema:function(){this.loadSchema()}},mounted:function(){this.loadSchema()},methods:{selectDB:function(e){this.$emit("selectDB",this.databases.indexOf(e))},toggle:function(e){this.open.includes(e)?this.open=this.open.filter((function(t){return t!==e})):this.open.push(e)},query:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$emit("query",e);case 1:case"end":return s.stop()}}),s)})))()},loadSchema:function(){if(this.schema.tables){for(var e=[],t=0,s=Object.entries(this.schema.tables);t<s.length;t++){for(var n=Object(l["a"])(s[t],2),a=n[0],r=n[1],i=[],o=0,c=Object.entries(r.columns);o<c.length;o++){var u=Object(l["a"])(c[o],2),d=u[0],p=u[1];i.push(Object(ge["a"])({id:"".concat(a,".").concat(d),name:d},p))}e.push({id:a,name:a,children:i})}this.items=e}else this.items=null}}},_e=ye,xe=(s("a819"),s("490a")),ke=s("b974"),we=s("eb2a"),qe=Object(q["a"])(_e,me,be,!1,null,null,null),Ce=qe.exports;S()(qe,{VBtn:j["a"],VFlex:$["a"],VIcon:L["a"],VProgressCircular:xe["a"],VSelect:ke["a"],VTooltip:fe["a"],VTreeview:we["a"]});var Se={name:"Database",components:{Splitpanes:p["Splitpanes"],Pane:p["Pane"],SqlConsole:K,TableView:ve,TreeView:Ce},data:function(){return{m_id:0,progress:0,currentdb:0,databases:[],schema:{},result:null,error:null,loading:!1,info:"",last_query:null}},mounted:function(){this.getDatabases()},beforeDestroy:function(){this.m_id++},methods:{resize:function(){this.$refs.console.$emit("resize")},queryTable:function(e){this.query("SELECT * FROM ".concat(e))},query:function(e,t){var s=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!s.loading){n.next=2;break}return n.abrupt("return");case 2:return s.error=null,s.loading=!0,s.info="",n.prev=5,n.next=8,s.$http.post("/database/"+(t?"execute":"query"),e);case 8:if(s.result=n.sent.data,s.last_query=e,setTimeout((function(){return s.resize()}),300),s.info="Runtime: "+x(s.result.duration),!/(^|\s)(create|alter|drop)\s/gi.test(e)){n.next=15;break}return n.next=15,s.loadSchema(s.m_id);case 15:a=JSON.parse(localStorage.getItem("sql_history")||"[]"),e=e.trim(),r=a.find((function(t){return t.sql===e}))||{sql:e},r.timestamp=(new Date).getTime(),a=a.filter((function(t){return t.sql!==e})),i=a.filter((function(e){return e.favorite})),a=a.filter((function(e){return!e.favorite})).slice(0,99).concat(i),a.unshift(r),a.sort((function(e,t){return e.timestamp<t.timestamp?1:-1})),localStorage.setItem("sql_history",JSON.stringify(a)),n.next=30;break;case 27:n.prev=27,n.t0=n["catch"](5),s.error=Object(d["get"])(n.t0,"response.data.msg",n.t0.message);case 30:s.loading=!1;case 31:case"end":return n.stop()}}),n,null,[[5,27]])})))()},getDatabases:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.m_id;case 1:if(s!==e.m_id){t.next=20;break}return t.prev=2,e.progress=-1,t.next=6,e.$http.get("/database/list");case 6:return n=t.sent,e.databases=n.data.databases,e.currentdb=n.data.current,t.next=11,e.loadSchema(s);case 11:return t.abrupt("return");case 14:return t.prev=14,t.t0=t["catch"](2),t.next=18,y(3e3);case 18:t.next=1;break;case 20:case"end":return t.stop()}}),t,null,[[2,14]])})))()},selectDB:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var n,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=t.m_id,a=3,r=0;case 3:if(!(r<a&&n===t.m_id)){s.next=26;break}return s.prev=4,t.progress=-1,t.schema={},s.next=9,t.$http.put("/database/current/"+e);case 9:return t.currentdb=e,s.next=12,t.loadSchema(n);case 12:return s.abrupt("return");case 15:if(s.prev=15,s.t0=s["catch"](4),!(r<a-1)){s.next=22;break}return s.next=20,y(500);case 20:s.next=23;break;case 22:t.getDatabases();case 23:r++,s.next=3;break;case 26:case"end":return s.stop()}}),s,null,[[4,15]])})))()},getTables:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="\n                            SELECT name\n                            FROM sqlite_master\n                            WHERE type = 'table'\n                            AND name NOT IN ('android_metadata', 'sqlite_sequence')\n                            ORDER BY name\n                        ",t.next=3,e.$http.post("/database/query",s);case 3:return n=t.sent,t.abrupt("return",n.data.data.map((function(e){return e[0]})));case 5:case"end":return t.stop()}}),t)})))()},getColumns:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var n,a,r,i,o,l,u,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n="pragma table_info(".concat(e,")"),s.next=3,t.$http.post("/database/query",n);case 3:a=s.sent,r=a.data.data,i=function(e){return a.data.headers.indexOf(e)},o={},l=Object(c["a"])(r);try{for(l.s();!(u=l.n()).done;)d=u.value,o[d[i("name")]]={type:d[i("type")],notnull:!!d[i("notnull")],dflt_value:d[i("dflt_value")],pk:!!d[i("pk")]}}catch(p){l.e(p)}finally{l.f()}return s.abrupt("return",o);case 10:case"end":return s.stop()}}),s)})))()},getForeignKeys:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var n,a,r,i,o,l,u,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n="pragma foreign_key_list(".concat(e,")"),s.next=3,t.$http.post("/database/query",n);case 3:a=s.sent,r=a.data.data,i=function(e){return a.data.headers.indexOf(e)},o=[],l=Object(c["a"])(r);try{for(l.s();!(u=l.n()).done;)d=u.value,o.push({from:d[i("from")],table:d[i("table")],to:d[i("to")]})}catch(p){l.e(p)}finally{l.f()}return s.abrupt("return",o);case 10:case"end":return s.stop()}}),s)})))()},loadTable:function(e,t,s){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,i,o,l,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=3,i=0;case 2:if(e!==n.m_id){a.next=23;break}return a.prev=3,a.next=6,n.getColumns(s);case 6:return o=a.sent,a.next=9,n.getForeignKeys(s);case 9:l=a.sent,u=Object(c["a"])(l);try{for(u.s();!(d=u.n()).done;)p=d.value,o[p.from].fk="".concat(p.table," (").concat(p.to,")")}catch(f){u.e(f)}finally{u.f()}return t.tables[s]={columns:o},a.abrupt("return");case 16:if(a.prev=16,a.t0=a["catch"](3),i!==r-1){a.next=20;break}throw a.t0;case 20:i++,a.next=2;break;case 23:case"end":return a.stop()}}),a,null,[[3,16]])})))()},loadSchema:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var n,a,r,i,o,c,u,d,p,f;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n={tables:{}},t.progress=0,a=3,r=0;case 4:if(e!==t.m_id){s.next=34;break}return s.prev=5,s.next=8,t.getTables();case 8:i=s.sent,o=0,c=Object.entries(i);case 10:if(!(o<c.length)){s.next=18;break}return u=Object(l["a"])(c[o],2),d=u[0],p=u[1],s.next=14,t.loadTable(e,n,p);case 14:d%3===0&&(f=100*(parseInt(d)+1)/i.length,t.progress=Math.round(f));case 15:o++,s.next=10;break;case 18:return t.progress=100,setTimeout((function(){t.schema=n}),150),s.abrupt("return");case 23:if(s.prev=23,s.t0=s["catch"](5),!(r<a-1)){s.next=30;break}return s.next=28,y(500);case 28:s.next=31;break;case 30:throw s.t0;case 31:r++,s.next=4;break;case 34:case"end":return s.stop()}}),s,null,[[5,23]])})))()}}},je=Se,Oe=(s("83ad"),s("a797")),Ve=Object(q["a"])(je,i,o,!1,null,"1d8a4026",null),Re=Ve.exports;S()(Ve,{VOverlay:Oe["a"]});var Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("splitpanes",{staticClass:"network-panel default-theme fill-height"},[s("pane",{staticStyle:{"min-width":"250px"},attrs:{size:100-e.detail_size}},[s("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,smooth:!0},expression:"{always: false, smooth: true}"}],ref:"scroll",staticClass:"network-container absolute-expand overflow-y-auto"},[e.session_list.length?s("v-list",{attrs:{dense:""}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.session_list,(function(t,n){return s("div",{key:n},[s("div",{staticClass:"text-center text--text font-weight-bold pt-4"},[e._v(e._s(e.formatTimestamp(t.timestamp,!0)))]),e._l(t.requests,(function(t){return s("v-list-item",{key:t,staticClass:"request-item",attrs:{"two-line":""}},[s("v-list-item-content",{staticClass:"py-0"},[s("v-list-item-title",{staticClass:"pt-2"},[s("span",{staticClass:"method",class:e.requests[t].headers.method.toLowerCase()},[e._v(e._s(e.requests[t].headers.method))]),e._v(" "+e._s(e.requests[t].headers.url.pathname)+" ")]),s("v-list-item-subtitle",{staticClass:"origin pb-2"},[e._v(e._s(e.requests[t].headers.url.origin))])],1),s("div",{staticClass:"mr-3"},[s("table",[s("tr",{staticClass:"request-info"},[s("td",{staticClass:"request-status",class:e.statusColor(e.requests[t].status)},[e.requests[t].status?s("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.requests[t].status))]):s("v-icon",{staticClass:"request-loading"},[e._v("mdi-timelapse")])],1),s("td",{staticClass:"request-timestamp font-weight-bold text-right"},[e._v(e._s(e.formatTimestamp(e.requests[t].timestamp)))])]),e.requests[t].response?s("tr",{staticClass:"v-list-item__subtitle request-info"},[s("td",[e._v(e._s(e.formatDuration(e.requests[t].response.timestamp-e.requests[t].timestamp)))]),s("td",{staticClass:"text-right"},[e._v(e._s(e.filesize(e.requests[t].response.body.size)))])]):e._e()])])],1)}))],2)})),0)],1):e._e()],1),s("v-speed-dial",{staticClass:"close_menu mr-2",attrs:{"open-on-hover":"",bottom:"",right:"",fixed:""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-fab-transition",{attrs:{"hide-on-leave":""}},[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.clear_visible,expression:"clear_visible"},{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearEndedRequests(t)}}},n),[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1)]}}])},[s("span",[e._v("Clear finished")])])]},proxy:!0}])},[s("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-btn",e._g({directives:[{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearPreviousRequests(t)}}},n),[s("v-icon",[e._v("mdi-upload-off")])],1)]}}])},[s("span",[e._v("Clear previous requests")])]),s("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-btn",e._g({directives:[{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearAllRequests(t)}}},n),[s("v-icon",[e._v("mdi-skull-outline")])],1)]}}])},[s("span",[e._v("Clear all requests")])])],1)],1),s("pane",{attrs:{size:e.detail_size}},[s("splitpanes",{staticClass:"default-theme fill-height",attrs:{horizontal:""}},[s("pane",[s("RequestViewer",{model:{value:e.selected_request,callback:function(t){e.selected_request=t},expression:"selected_request"}})],1),s("pane",[s("RequestViewer",{model:{value:e.selected_response,callback:function(t){e.selected_response=t},expression:"selected_response"}})],1)],1)],1)],1)},Fe=[],$e=s("cee5"),De=s.n($e);function Le(){return new Promise((function(e,t){var s=indexedDB.open("network",2);s.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("requests")&&t.deleteObjectStore("requests"),t.createObjectStore("requests",{keyPath:"uid"})},s.onsuccess=function(t){e(t.target.result)},s.onerror=function(e){t(e)}}))}var Ie={putRequest:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Le();case 2:s=t.sent,s.transaction(["requests"],"readwrite").objectStore("requests").put(e);case 4:case"end":return t.stop()}}),t)})))()},getRequests:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,s){var n=t.transaction(["requests"]).objectStore("requests").getAll();n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){s(e)}})));case 4:case"end":return e.stop()}}),e)})))()},clearRequests:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:t=e.sent,t.transaction(["requests"],"readwrite").objectStore("requests").clear();case 4:case"end":return e.stop()}}),e)})))()}},Be=s("bceb"),Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"network-detail-container"},[e.request?s("v-expansion-panels",{attrs:{value:e.open,accordion:""}},[s("v-expansion-panel",[s("v-expansion-panel-header",[s("v-layout",[s("v-flex",{attrs:{"align-self-center":""}},[e._v(" Headers ")]),s("v-flex",[s("v-label",[s("small",{staticClass:"pointer"},[e._v(e._s(e.formatTimestamp(e.request.timestamp,!0)))])])],1)],1)],1),s("v-expansion-panel-content",[s("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.details.headers,expression:"details.headers"}],class:e.codestyle},[s("code",{staticClass:"http"})]),e.params?[s("v-divider",{staticClass:"mt-2 mb-1"}),s("v-label",[s("small",[e._v("Parameters:")])]),s("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.params,expression:"params"}],staticClass:"ml-2",class:e.codestyle},[s("code",{staticClass:"yaml"})])]:e._e()],2)],1),e.hasBody?s("v-expansion-panel",[s("v-expansion-panel-header",[s("v-layout",[s("v-flex",{attrs:{xs11:"","align-self-center":""}},[e._v(" Body ")]),s("v-flex",{staticClass:"ml-4"},[e.details.large?s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-btn",e._g({attrs:{icon:"","x-small":""},on:{click:function(t){return t.stopPropagation(),e.download(t)}}},n),[s("v-icon",[e._v("mdi-download")])],1)]}}],null,!1,4175869490)},[s("span",[e._v("Download")])]):s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-btn",e._g({attrs:{icon:"","x-small":""},on:{click:function(t){return t.stopPropagation(),e.copy(t)}}},n),[s("v-icon",[e._v("mdi-content-copy")])],1)]}}],null,!1,2104686646)},[s("span",[e._v("Copy")])])],1)],1)],1),s("v-expansion-panel-content",[e.json||e.html?s("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.details.body,expression:"details.body"}],class:e.codestyle},[s("code",{class:{json:e.json,html:e.html}})]):s("v-label",[e._v(" "+e._s(e.details.body)+" ")])],1)],1):e._e()],1):e._e(),s("v-snackbar",{attrs:{top:"",color:"success",timeout:2e3},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[s("v-flex",{staticClass:"text-center"},[s("h3",[e._v(e._s(e.snackbar.text))])])],1)],1)},Pe=[],Ne=(s("5319"),s("2ca0"),s("596b")),ze=s.n(Ne),Ae=s("4c4f"),He={name:"RequestViewer",props:{value:Object},data:function(){return{details:{headers:"",body:"",large:!1},snackbar:{visible:!1,text:""}}},computed:{open:function(){return this.hasBody&&!this.urlencoded?1:0},codestyle:function(){return this.dark_mode?"dark":"light"},request:function(){return this.value},headers:function(){return this.request&&this.request.headers||{}},raw_headers:function(){return this.request&&this.request.raw_headers||""},params:function(){var e=this.get?this.headers.url.search:this.urlencoded&&this.details.body;return e?e.split(/[?&]/).map((function(e){return e.replace("=",": ")})).join("\n").trim():null},contentType:function(){return this.headers["content-type"]||""},get:function(){return"GET"===this.headers.method},json:function(){return this.contentType.includes("application/json")||this.hasBody&&["{","["].includes(this.details.body[0])},html:function(){return this.contentType.includes("text/html")},urlencoded:function(){var e=this.details.body;return this.contentType.includes("application/x-www-form-urlencoded")||!this.json&&!e.includes("\n")&&(e.startsWith("?")||e.includes("=")||e.includes("&"))},hasBody:function(){return!(!this.request||!this.request.body.size)}},watch:{request:function(){this.updateDetails()}},mounted:function(){this.updateDetails()},methods:{updateDetails:function(){var e=this;this.details={headers:"",body:"",large:!1};var t=this.request;if(t){var s=t.raw_headers;this.$set(this.details,"headers",s),t.body&&(t.body.size>1e5?(this.$set(this.details,"large",!0),this.$set(this.details,"body","[ Size: "+De()(t.body.size)+" ]")):Me(s,t.body).then((function(s){if(e.request===t){if(e.json||["{","["].includes(s[0])){var n=JSON.parse(s);n&&(s=JSON.stringify(n,null,2))}e.$set(e.details,"body",s)}})))}},download:function(){Object(Ae["a"])(this.request.body,"".concat(this.request.timestamp,".txt"))},copy:function(){var e=this;Me(this.request.raw_headers,this.request.body).then((function(t){ze()(t),e.snackbar={visible:!0,text:"Content copied successfully!"}}))},formatTimestamp:_}};function Me(e,t){return new Promise((function(s){var n=new FileReader;n.onloadend=function(e){s(e.target.result)};var a="utf-8",r=/charset=([^;\n ]+)/.exec(e);r&&(a=r[1]),n.readAsText(t,a)}))}var Ue=He,Je=(s("ba64"),s("b4dc"),s("cd55")),We=s("49e2"),Qe=s("c865"),Ge=s("0393"),Ke=s("24c9"),Ye=s("2db4"),Ze=Object(q["a"])(Ue,Ee,Pe,!1,null,"4d974b14",null),Xe=Ze.exports;S()(Ze,{VBtn:j["a"],VDivider:F["a"],VExpansionPanel:Je["a"],VExpansionPanelContent:We["a"],VExpansionPanelHeader:Qe["a"],VExpansionPanels:Ge["a"],VFlex:$["a"],VIcon:L["a"],VLabel:Ke["a"],VLayout:I["a"],VSnackbar:Ye["a"],VTooltip:fe["a"]});var et=null,tt=null,st=function(){return{timestamp:(new Date).getTime(),requests:[]}},nt={name:"Network",components:{Splitpanes:p["Splitpanes"],Pane:p["Pane"],RequestViewer:Xe},props:{active:Boolean},data:function(){return{connected:!1,session_list:[],requests:{},selected:void 0,clear_visible:!1}},computed:{detail_size:function(){return void 0!==this.selected?40:0},session:function(){var e=this.session_list.length;return e?this.session_list[e-1]:{}},selected_request:function(){if(void 0!==this.selected){var e=Object(d["sortBy"])(Object.values(this.requests),"timestamp");return e[this.selected]}},selected_response:function(){var e=this.selected_request;if(e)return e.response},total_requests:function(){return Object.keys(this.requests).length}},watch:{active:function(e){var t=this;e?setTimeout((function(){t.clear_visible=!0}),300):this.clear_visible=!1},total_requests:function(e){this.$emit("requests",e)}},mounted:function(){var e=this;this.nextItem=this.nextItem.bind(this),document.addEventListener("keydown",this.nextItem),this.clear_visible=this.active,this.getHistory().then((function(){e.autoClearRequests();var t=e.$refs.scroll;t.scrollTop=t.scrollHeight,e.openRequest(),e.openResponse()}))},beforeDestroy:function(){document.removeEventListener("keydown",this.nextItem),et&&(et.close(),et=null),tt&&(tt.close(),tt=null)},methods:{nextItem:function(e){this.active&&void 0!==this.selected&&(38===e.keyCode&&this.selected>0?this.selected--:40===e.keyCode&&this.selected<Object.keys(this.requests).length-1&&this.selected++)},host:function(){return this.$http.defaults.baseURL.substr(7)},openRequest:function(){var e=this,t=et=new WebSocket("ws://".concat(this.host(),"/network/request"));t.binaryType="arraybuffer",t.onopen=function(){console.info("Request channel opened!")},t.onmessage=function(t){var s=Object(Be["a"])(t);if(s){e.connected&&e.session_list.length||(e.session_list.push(st()),e.connected=!0),s.session=e.session.timestamp,s.timestamp=(new Date).getTime();var n=e.session.requests;n.includes(s.uid)||n.push(s.uid),e.$set(e.requests,s.uid,s),Ie.putRequest(s),e.autoClearRequests()}},t.onclose=function(){e.connected=!1,et===t&&setTimeout((function(){return e.openRequest()}),3e3)}},openResponse:function(){var e=this,t=tt=new WebSocket("ws://".concat(this.host(),"/network/response"));t.binaryType="arraybuffer",t.onopen=function(){console.info("Response channel opened!")},t.onmessage=function(t){var s=Object(Be["a"])(t);if(s){var n=e.requests[s.uid];n&&(s.timestamp=(new Date).getTime(),n.status=s.headers.status,n.response=s,e.$set(e.requests,s.uid,Object(ge["a"])({},n)),Ie.putRequest(n))}},t.onclose=function(){tt===t&&setTimeout((function(){return e.openResponse()}),3e3)}},getHistory:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,n,a,r,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=d["sortBy"],t.next=3,Ie.getRequests();case 3:t.t1=t.sent,s=(0,t.t0)(t.t1,"timestamp"),n={},a={},r=Object(c["a"])(s);try{for(r.s();!(i=r.n()).done;)o=i.value,l=n[o.session]||st(),l.timestamp=o.session,l.requests.push(o.uid),n[o.session]=l,a[o.uid]=o}catch(u){r.e(u)}finally{r.f()}e.session_list=Object(d["sortBy"])(Object.values(n),"timestamp"),e.requests=a;case 11:case"end":return t.stop()}}),t)})))()},autoClearRequests:function(){var e=250;this.total_requests>e&&(this.clearPreviousRequests(),this.total_requests>e&&this.clearEndedRequests())},clearAllRequests:function(){this.session_list=[],this.requests={},this.selected=void 0,Ie.clearRequests()},clearPreviousRequests:function(){if(this.session_list.length){var e=this.session,t=Object(d["pickBy"])(this.requests,(function(t){return t.session===e.timestamp})),s=Object.values(t);this.session_list=[e],this.requests=t,this.selected=void 0,Ie.clearRequests(),s.forEach(Ie.putRequest)}},clearEndedRequests:function(){if(this.session_list.length){var e=this.session,t=Object(d["pickBy"])(this.requests,(function(t){return!t.status&&t.session===e.timestamp})),s=Object.values(t);e.requests=s.map((function(e){return e.uid})),this.session_list=s.length?[e]:[],this.requests=t,this.selected=void 0,Ie.clearRequests(),s.forEach(Ie.putRequest)}},statusColor:function(e){return e=parseInt(e),200===e?"success--text":e<400?"warning--text":"error--text"},formatDuration:function(e){return e>=1e3?(e/1e3).toFixed(2)+" s":e+" ms"},filesize:De.a,formatTimestamp:_}},at=nt,rt=(s("d06e"),s("9bfd"),s("0789")),it=s("c73b"),ot=Object(q["a"])(at,Te,Fe,!1,null,"614d477e",null),lt=ot.exports;S()(ot,{VBtn:j["a"],VFabTransition:rt["c"],VIcon:L["a"],VList:B["a"],VListItem:E["a"],VListItemContent:P["a"],VListItemGroup:N["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"],VSpeedDial:it["a"],VTooltip:fe["a"]});var ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scrollable fill-height"},[s("div",{staticClass:"plugin-container absolute-expand overflow-y-auto pa-2"},[e.json?s("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.body,expression:"body"}],class:e.codestyle},[s("code",{staticClass:"json"})]):e.plugin.live?s("div",{staticClass:"absolute-expand d-flex"},[s("iframe",{ref:"iframe",staticClass:"flex",attrs:{src:e.frame_src},on:{load:e.frame_loaded}})]):s("div",{domProps:{innerHTML:e._s(e.body)}})]),s("v-tooltip",{attrs:{left:"","open-delay":"1200"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[s("v-fab-transition",{attrs:{"hide-on-leave":""}},[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.reload_visible,expression:"reload_visible"},{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:"",fixed:"",right:"",bottom:""},on:{click:function(t){return t.stopPropagation(),e.reload(t)}}},n),[s("v-icon",{class:{spin:e.loading}},[e._v("mdi-sync")])],1)],1)]}}])},[s("span",[e._v("Reload "+e._s(e.plugin.name))])])],1)},ut=[],dt={name:"Plugin",props:{active:Boolean,plugin:Object},data:function(){return{load_uid:null,loaded:!1,loading:!1,reload_visible:!1,body:void 0,json:!1}},computed:{codestyle:function(){return this.dark_mode?"dark":"light"},frame_src:function(){return this.load_uid&&"".concat(this.$http.defaults.baseURL,"/plugins/").concat(this.plugin.key,"?").concat(this.load_uid)}},watch:{active:{handler:function(e){var t=this;e?(setTimeout((function(){t.reload_visible=!0}),300),this.loaded||this.reload()):this.reload_visible=!1},immediate:!0},codestyle:"syncFrame"},methods:{sendMessage:function(e){var t=this.$refs.iframe;t&&t.contentWindow.postMessage(e,"*")},syncFrame:function(){this.sendMessage({plugin:this.plugin.key,host:this.$http.defaults.baseURL,theme:this.codestyle,colors:this.$vuetify.theme.currentTheme})},frame_loaded:function(){this.frame_src&&(this.loaded=!0,this.loading=!1,this.syncFrame())},reload:function(){var e=this;this.active&&!this.loading&&(this.loading=!0,this.plugin.live?this.load_uid=Date.now():this.$http.get("/plugins/"+this.plugin.key).then((function(t){var s=t.data,n=t.headers;e.loaded=!0,e.json="application/json"===n["content-type"],e.body=e.json?JSON.stringify(s,null,2):s})).finally((function(){e.loading=!1})))}}},pt=dt,ft=(s("c76d"),s("2a84"),Object(q["a"])(pt,ct,ut,!1,null,"6b9f0a94",null)),ht=ft.exports;S()(ft,{VBtn:j["a"],VFabTransition:rt["c"],VIcon:L["a"],VTooltip:fe["a"]});var vt=[{key:"database",name:"Database"},{key:"network",name:"Network"}],mt={name:"App",components:{Database:Re,Network:lt,Plugin:ht},data:function(){return{plugins:[],current_page:-1,requests:0}},computed:{version:function(){return"1.6.0"},icon_dark_mode:function(){return this.dark_mode?"mdi-white-balance-sunny":"mdi-weather-night"},baseURL:{get:function(){return this.$http.defaults.baseURL.substr(7)},set:function(e){localStorage.setItem("baseURL",e),this.$http.defaults.baseURL="http://"+e}},pages:function(){return vt.concat(this.plugins)}},watch:{current_page:function(e){localStorage.setItem("current_page",e)}},beforeMount:function(){var e=this;this.baseURL=localStorage.getItem("baseURL")||this.baseURL,this.dark_mode=JSON.parse(localStorage.getItem("dark"))||!1;var t=parseInt(localStorage.getItem("current_page"))||1;this.$http.get("/plugins").then((function(t){var s=t.data;e.plugins=s})).finally((function(){e.current_page=Math.min(t,e.pages.length)}))},methods:{setRequestsCount:function(e){this.requests=e}}},bt=mt,gt=(s("e38c"),s("5c64"),s("7496")),yt=s("a75b"),_t=s("553a"),xt=s("7e85"),kt=s("e516"),wt=s("9c54"),qt=s("56a4"),Ct=s("b73d"),St=Object(q["a"])(bt,a,r,!1,null,"bf66340c",null),jt=St.exports;S()(St,{VApp:gt["a"],VContent:yt["a"],VFlex:$["a"],VFooter:_t["a"],VIcon:L["a"],VSpacer:Q["a"],VStepper:xt["a"],VStepperContent:kt["a"],VStepperHeader:wt["a"],VStepperItems:wt["b"],VStepperStep:qt["a"],VSwitch:Ct["a"],VTextField:oe["a"]});var Ot=s("f309");n["a"].use(Ot["a"]);var Vt=new Ot["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},themes:{light:{primary:"#2196F3",accent:"#9C27B0",secondary:"#30B1DC",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252",controls:"#FFFFFF",neutral:"#666666",text:"#616161",panel:"#f2f2f2",controls_border:"#D5D5D5"},dark:{primary:"#21CFF3",accent:"#FFE18D",secondary:"#21CFF3",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252",controls:"#424242",neutral:"#CCCCCC",text:"#FFFFFF",panel:"#303030",controls_border:"#494949"}}}}),Rt=s("bc3a"),Tt=s.n(Rt),Ft=s("a7fe"),$t=s.n(Ft),Dt=Tt.a.create({baseURL:"http://localhost:30000",timeout:3e4});n["a"].use($t.a,Dt),n["a"].mixin({computed:{dark_mode:{get:function(){return this.$vuetify.theme.dark},set:function(e){this.$vuetify.theme.dark=e,localStorage.setItem("dark",JSON.stringify(e))}}}});var Lt=s("123d"),It=s.n(Lt);n["a"].use(It.a);var Bt=s("998c"),Et=s.n(Bt);n["a"].use(Et.a),n["a"].directive("blur",{inserted:function(e){e.onfocus=function(e){return e.target.blur()}}});s("c1ea"),s("f24d");new n["a"]({vuetify:Vt,render:function(e){return e(jt)}}).$mount("#app")},"5c64":function(e,t,s){"use strict";var n=s("d32a"),a=s.n(n);a.a},7020:function(e,t,s){},7105:function(e,t,s){"use strict";var n=s("ac0e"),a=s.n(n);a.a},"75db":function(e,t,s){},"7df6":function(e,t,s){},"83ad":function(e,t,s){"use strict";var n=s("8b65"),a=s.n(n);a.a},"8b65":function(e,t,s){},"9bfd":function(e,t,s){"use strict";var n=s("de26"),a=s.n(n);a.a},"9d0b":function(e,t,s){"use strict";var n=s("75db"),a=s.n(n);a.a},a39e:function(e,t,s){"use strict";var n=s("0c19"),a=s.n(n);a.a},a468:function(e,t,s){},a578:function(e,t,s){},a819:function(e,t,s){"use strict";var n=s("7020"),a=s.n(n);a.a},ac0e:function(e,t,s){},b4dc:function(e,t,s){"use strict";var n=s("1543"),a=s.n(n);a.a},b7f5:function(e,t,s){},ba64:function(e,t,s){"use strict";var n=s("a468"),a=s.n(n);a.a},bceb:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return c}));s("a15b"),s("fb6a"),s("a434"),s("ace4"),s("d3b7"),s("ac1f"),s("25f0"),s("841c"),s("1276"),s("5cc6"),s("9a8c"),s("a975"),s("735e"),s("c1ac"),s("d139"),s("3a7b"),s("d5d6"),s("82f8"),s("e91f"),s("60bd"),s("5f96"),s("3280"),s("3fcc"),s("ca91"),s("25a1"),s("cd26"),s("3c5d"),s("2954"),s("649e"),s("219c"),s("170b"),s("b39a"),s("72f7");var n=s("3835"),a=s("b85c"),r=s("470b"),i=s.n(r);function o(e){var t=document.createElement("a");return t.href=e,{pathname:t.pathname,origin:t.origin,search:t.search}}function l(e){var t,s={},r=Object(a["a"])(e.split("\n"));try{for(r.s();!(t=r.n()).done;){var i=t.value,l=i.split(": "),c=Object(n["a"])(l,2),u=c[0],d=c[1];u&&(s[u.toLowerCase()]=d)}}catch(p){r.e(p)}finally{r.f()}return s.url=o(s.url),s}function c(t){for(var s=new Uint8Array(t.data),n=-1,a=0;a<s.length&&n<0;a++)"\n"===String.fromCharCode(s[a])&&"\n"===String.fromCharCode(s[a+1])&&(n=a+1);if(n>=0){var r=new TextDecoder("utf-8"),o=r.decode(s.slice(0,n)).toString().split("\n"),c=o.splice(0,1).pop(),u=o.join("\n");o=l(u);var d=new Blob([i.a.gunzipSync(e.from(t.data,n+1))],{type:o["content-type"]});return{uid:c,headers:o,raw_headers:u,body:d}}return!1}}).call(this,s("b639").Buffer)},c748:function(e,t,s){"use strict";var n=s("7df6"),a=s.n(n);a.a},c76d:function(e,t,s){"use strict";var n=s("a578"),a=s.n(n);a.a},d06e:function(e,t,s){"use strict";var n=s("b7f5"),a=s.n(n);a.a},d32a:function(e,t,s){},d4af:function(e,t,s){"use strict";var n=s("0f32"),a=s.n(n);a.a},de26:function(e,t,s){},e38c:function(e,t,s){"use strict";var n=s("4f8e"),a=s.n(n);a.a},ef47:function(e,t,s){},f24d:function(e,t,s){}});
//# sourceMappingURL=app.fe42827e.js.map